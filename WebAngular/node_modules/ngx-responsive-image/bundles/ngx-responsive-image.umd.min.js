!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/cdk/layout"),require("rxjs"),require("rxjs/operators"),require("@angular/cdk/observers"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-responsive-image",["exports","@angular/core","@angular/cdk/layout","rxjs","rxjs/operators","@angular/cdk/observers","@angular/common"],t):t((e=e||self)["ngx-responsive-image"]={},e.ng.core,e.ng.cdk.layout,e.rxjs,e.rxjs.operators,e.ng.cdk.observers,e.ng.common)}(this,function(e,t,r,i,n,o,s){"use strict";function a(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s}var p=new t.InjectionToken("BREAKPOINTS"),u=[r.Breakpoints.XSmall,r.Breakpoints.Small,r.Breakpoints.Medium,r.Breakpoints.Large,r.Breakpoints.XLarge],c=new t.InjectionToken("IMAGE_WIDTHS"),b=function(){function e(e,t,r){var o=this;this.breakpointObserver=e,this.breakpoints=t,this.imageWidths=r,this.breakpoints$=this.breakpointObserver.observe(this.breakpoints),this.breakpointChange$=this.breakpoints$.pipe(n.filter(function(e){return e.matches}),n.distinctUntilChanged(function(e,t){return Object.keys(e.breakpoints)[Object.values(e.breakpoints).indexOf(!0)]===Object.keys(t.breakpoints)[Object.values(t.breakpoints).indexOf(!0)]}),n.startWith(null),n.pairwise()),this.breakpointUp$=this.breakpointChange$.pipe(n.filter(function(e,t){var r=a(e,2),i=r[0],n=r[1];if(0===t)return!0;var o=Object.values(i.breakpoints),s=Object.values(n.breakpoints),p=o.findIndex(function(e){return e});return s.findIndex(function(e){return e})>p}),n.filter(function(e){var t=a(e,2),r=(t[0],t[1]),i=Object.keys(r.breakpoints)[Object.values(r.breakpoints).indexOf(!0)];return(!o.maximumBreakpoint||Object.keys(r.breakpoints).indexOf(i)>Object.keys(r.breakpoints).indexOf(o.maximumBreakpoint))&&(o.maximumBreakpoint=i,!0)}),n.map(function(e){var t=a(e,2),r=(t[0],t[1]);return Object.keys(r.breakpoints)[Object.values(r.breakpoints).indexOf(!0)]}),n.takeWhile(function(e){return o.maximumBreakpoint!==o.breakpoints[o.breakpoints.length-1]},!0),n.shareReplay()),this.breakpointAndWidthUp$=i.merge(this.breakpoints$.pipe(n.first(),n.map(function(e){return Object.keys(e.breakpoints)[Object.values(e.breakpoints).indexOf(!0)]})),this.breakpointUp$).pipe(n.map(function(e){return{width:o.imageWidths[o.breakpoints.indexOf(e)],breakpoint:e}}),n.shareReplay())}return e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:r.BreakpointObserver},{type:void 0,decorators:[{type:t.Inject,args:[p]}]},{type:void 0,decorators:[{type:t.Inject,args:[c]}]}]},e}(),d=function(){function e(e,r,i,n){this.platformId=e,this.element=r,this.mediaService=i,this.renderer2=n,this.breakpointUp=new t.EventEmitter,this.subscriptions={}}return e.prototype.ngOnChanges=function(e){var t=this;s.isPlatformBrowser(this.platformId)&&(this.subscriptions.mediaSubscription&&this.subscriptions.mediaSubscription.unsubscribe(),this.imgSrc&&(this.subscriptions.mediaSubscription=this.mediaService.breakpointAndWidthUp$.subscribe(function(e){t.manual?t.breakpointUp.emit({imgSrc:t.imgSrc,breakpoint:e.breakpoint,width:e.width}):t.renderer2.setAttribute(t.element.nativeElement,"src",t.imgSrc.replace(":width",e.width))})))},e.prototype.ngOnDestroy=function(){var e=this;Object.keys(this.subscriptions).forEach(function(t){return e.subscriptions[t].unsubscribe()})},e.decorators=[{type:t.Directive,args:[{selector:"img[responsiveImage]"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]},{type:t.ElementRef},{type:b},{type:t.Renderer2}]},e.propDecorators={imgSrc:[{type:t.Input}],manual:[{type:t.Input}],breakpointUp:[{type:t.Output}]},e}(),l=function(){function e(){}return e.forRoot=function(t,r){return{ngModule:e,providers:[{provide:p,useValue:t},{provide:c,useValue:r},b]}},e.decorators=[{type:t.NgModule,args:[{declarations:[d],imports:[o.ObserversModule,s.CommonModule],exports:[d]}]}],e}();e.BREAKPOINTS=p,e.DEFAULT_BREAKPOINTS=u,e.DEFAULT_WIDTHS=[300,600,960,1280,1920],e.IMAGE_WIDTHS=c,e.MediaService=b,e.NgxResponsiveImageModule=l,e.ResponsiveImageDirective=d,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-responsive-image.umd.min.js.map